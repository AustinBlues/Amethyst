<% url = url_for(:feed, :create, page: @page) %>

<div class="card">
  <div class="card-header bg-info">
    <a href="<%= url_for :post, :index %>" class="btn btn-link">
      &larr;
    </a>
      
    <button type="button" class="btn btn-light btn-circle"  data-toggle="modal"
          data-target="#writingForm" aria-label="Add" style="float:right; font-size:20pt">
	  +
    </button>

    <h2 class="card-title text-center">Feeds</h2>
    
    <%= partial 'layouts/flash' %>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="feedForm" role="dialog">
    <div class="modal-dialog">
      <%= partial 'feed/form', object: Feed.new,
            locals: {url: url, page: @page, button: button_to('Submit',  url, class: :form)} %>
    </div>
  </div>

  <% if @feeds.size == 0 %>
    <h2 class="card-content" style="text-align: center">
      No feeds
    </h2>
  <% else %>
    <%= partial('layouts/pagination', object: @feeds, locals: {view: :feed}) if ENV['TOP_PAGINATION']%>

    <table id="feed" class="table table-striped">
      <tbody>
        <%= partial 'feed/feed', collection: @feeds %>
      </tbody>
    </table>

    <%= partial('layouts/pagination', object: @feeds, locals: {view: :feed}) if !ENV['TOP_PAGINATION']%>
  <% end %>
</div>

