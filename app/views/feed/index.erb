<% url = url_for(:feed, :create, page: @page) %>

<div class="panel panel-primary">
  <div class="panel-heading">
    <button type="button" class="btn btn-default btn-sm"  data-toggle="modal"
          data-target="#writingForm" aria-label="Add" style="float:right">
      <span class="glyphicon glyphicon-plus" style="top-margin: -5px"></span>
    </button>
    <h2 class="panel-title" style="text-align:center">Feeds</h2>
    <%= partial 'layouts/flash' %>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="feedForm" role="dialog">
    <div class="modal-dialog">
      <%= partial 'feed/form', object: Feed.new,
            locals: {url: url, page: @page, button: button_to('Submit',  url, class: :form)} %>
    </div>
  </div>

  <% if @feeds.count == 0 %>
    <h2 class="panel-content" style="text-align: center">
      No feeds
    </h2>
  <% else %>
    <%= partial('layouts/pagination', object: @feeds, locals: {view: :feed}) if ENV['TOP_PAGINATION']%>

    <table id="feed" class="table table-striped">
      <tbody>
        <%= partial 'feed/feed', collection: @feeds %>
      </tbody>
    </table>

    <%= partial('layouts/pagination', object: @feeds, locals: {view: :feed}) if !ENV['TOP_PAGINATION']%>
  <% end %>
</div>

